# Implementation Plan

- [ ] 1. プロジェクト構造とコア基盤の設定

  - プロジェクトディレクトリ構造を作成（core、cli、macos-app）
  - TypeScript 設定とビルドシステムを構築
  - 基本的な package.json と dependencies を設定
  - _Requirements: 6.1, 6.2_

- [ ] 2. GitHub API クライアントの実装
- [ ] 2.1 基本的な GraphQL クライアントを実装

  - GitHub GraphQL API 用の HTTP クライアントを作成
  - 認証ヘッダーとエラーハンドリングを実装
  - 基本的な GraphQL クエリ実行機能をテスト
  - _Requirements: 2.3, 5.4_

- [ ] 2.2 Discussions API インターフェースを実装

  - Discussion、Comment、Author のデータモデルを定義
  - listDiscussions、getDiscussion、createComment、createDiscussion メソッドを実装
  - GraphQL クエリとミューテーションを作成
  - _Requirements: 1.1, 1.2, 2.1, 3.1, 4.1_

- [ ] 2.3 API クライアントのユニットテストを作成

  - モック GitHub API レスポンスを作成
  - 各 API メソッドのテストケースを実装
  - エラーハンドリングのテストを追加
  - _Requirements: 2.4, 4.2_

- [ ] 3. 認証とコンフィグ管理の実装
- [ ] 3.1 認証マネージャーを実装

  - Personal Access Token の保存・取得機能を実装
  - トークン検証機能を作成
  - 安全なトークンストレージ（ファイルシステム）を実装
  - _Requirements: 5.1, 5.2, 5.3_

- [ ] 3.2 設定管理システムを実装

  - 設定ファイルの読み書き機能を実装
  - デフォルトリポジトリ設定を管理
  - 設定の検証とマイグレーション機能を追加
  - _Requirements: 1.3, 6.2, 6.3_

- [ ] 3.3 認証と設定のテストを作成

  - 認証フローのテストケースを実装
  - 設定管理のユニットテストを作成
  - セキュリティ関連のテストを追加
  - _Requirements: 5.3, 5.4_

- [ ] 4. CLI アプリケーションの実装
- [ ] 4.1 CLI フレームワークとコマンド構造を設定

  - Commander.js または類似ライブラリを設定
  - 基本的なコマンド構造（list、show、comment、create、config）を定義
  - ヘルプシステムとオプション解析を実装
  - _Requirements: 1.1, 2.1, 3.1, 4.1_

- [ ] 4.2 ディスカッション一覧コマンドを実装

  - `list` コマンドのハンドラーを実装
  - テーブル形式でのアウトプットフォーマッターを作成
  - リポジトリ指定とデフォルトリポジトリ処理を実装
  - _Requirements: 1.1, 1.2, 1.3_

- [ ] 4.3 ディスカッション詳細表示コマンドを実装

  - `show` コマンドのハンドラーを実装
  - ディスカッション本文とコメントの表示機能を作成
  - マークダウンレンダリングまたはプレーンテキスト表示を実装
  - _Requirements: 3.1, 3.2, 3.3_

- [ ] 4.4 コメント投稿コマンドを実装

  - `comment` コマンドのハンドラーを実装
  - コメント内容の入力処理（引数またはエディタ起動）を実装
  - 投稿成功時の URL 表示機能を追加
  - _Requirements: 2.1, 2.2, 2.4_

- [ ] 4.5 ディスカッション作成コマンドを実装

  - `create` コマンドのハンドラーを実装
  - タイトル、本文、カテゴリの入力処理を実装
  - 作成成功時の URL 表示機能を追加
  - _Requirements: 4.1, 4.2, 4.3_

- [ ] 4.6 設定管理コマンドを実装

  - `config` コマンドのハンドラーを実装
  - トークン設定、デフォルトリポジトリ設定機能を実装
  - 設定表示と削除機能を追加
  - _Requirements: 5.1, 5.2, 6.2_

- [ ] 5. macOS アプリケーションの基盤実装
- [ ] 5.1 Xcode プロジェクトとアプリ構造を作成

  - SwiftUI ベースの macOS アプリプロジェクトを作成
  - 基本的なナビゲーション構造を実装
  - アプリアイコンと基本的な UI 設定を追加
  - _Requirements: 1.4, 6.1_

- [ ] 5.2 Swift 用 GitHub API サービスを実装

  - TypeScript の API クライアントと同等の Swift 実装を作成
  - URLSession ベースの HTTP クライアントを実装
  - JSON デコーディングとエラーハンドリングを追加
  - _Requirements: 1.1, 2.1, 3.1, 4.1_

- [ ] 5.3 設定管理サービスを実装

  - UserDefaults または Keychain を使用した設定保存を実装
  - CLI と共有可能な設定ファイル形式を使用
  - 設定の同期機能を実装
  - _Requirements: 6.2, 6.3, 5.2_

- [ ] 6. macOS アプリケーションの UI 実装
- [ ] 6.1 ディスカッション一覧ビューを実装

  - SwiftUI でディスカッション一覧を表示するビューを作成
  - 検索とフィルタリング機能を追加
  - リフレッシュとページネーション機能を実装
  - _Requirements: 1.1, 1.2, 1.4_

- [ ] 6.2 ディスカッション詳細ビューを実装

  - ディスカッション本文とコメント表示ビューを作成
  - マークダウンレンダリング機能を実装
  - コメント投稿 UI を追加
  - _Requirements: 2.5, 3.1, 3.2_

- [ ] 6.3 コメント作成・編集機能を実装

  - テキストエディタ UI でコメント作成機能を実装
  - マークダウンプレビュー機能を追加
  - 投稿確認とエラーハンドリングを実装
  - _Requirements: 2.1, 2.2, 2.5_

- [ ] 6.4 ディスカッション作成ビューを実装

  - 新規ディスカッション作成フォームを実装
  - カテゴリ選択機能を追加
  - 作成確認とバリデーション機能を実装
  - _Requirements: 4.1, 4.2, 4.3_

- [ ] 6.5 設定画面を実装

  - トークン設定とデフォルトリポジトリ設定 UI を作成
  - 設定の検証とエラー表示機能を実装
  - CLI との設定同期確認機能を追加
  - _Requirements: 5.1, 5.2, 6.2, 6.3_

- [ ] 7. エラーハンドリングとユーザー体験の向上
- [ ] 7.1 統一されたエラーハンドリングシステムを実装

  - CLI と macOS アプリで一貫したエラーメッセージを実装
  - ネットワークエラー、認証エラー、API エラーの適切な処理を追加
  - ユーザーフレンドリーなエラーメッセージとリカバリ提案を実装
  - _Requirements: 2.4, 5.3, 6.4_

- [ ] 7.2 ローディング状態とフィードバックを実装

  - CLI 用のプログレスインジケーターを実装
  - macOS アプリ用のローディングスピナーとプログレスバーを追加
  - 操作成功時の適切なフィードバックを実装
  - _Requirements: 2.2, 4.2_

- [ ] 8. テストとドキュメント
- [ ] 8.1 統合テストを実装

  - CLI コマンドのエンドツーエンドテストを作成
  - macOS アプリの主要ユーザーフローテストを実装
  - 設定共有機能のテストを追加
  - _Requirements: 6.1, 6.2, 6.3, 6.4_

- [ ] 8.2 ドキュメントと README を作成

  - インストール手順とセットアップガイドを作成
  - CLI コマンドリファレンスを作成
  - macOS アプリの使用方法ガイドを作成
  - _Requirements: 5.1, 5.2_

- [ ] 9. パッケージングと配布準備
- [ ] 9.1 CLI ツールのパッケージングを実装

  - npm パッケージ設定を作成
  - バイナリビルド設定を追加
  - インストールスクリプトを作成
  - _Requirements: 6.1_

- [ ] 9.2 macOS アプリのビルドと配布設定
  - アプリ署名と notarization 設定を追加
  - アプリアイコンとメタデータを完成
  - 配布用ビルドスクリプトを作成
  - _Requirements: 6.1_
